# Extract Complex Transaction Logic

## ðŸŸ¡ Medium Priority

### Summary
saveQuestions method is 58 lines - should be broken down.

### Implementation
Break down into smaller functions:
```typescript
async saveQuestions(projectId: string, sections: Section[]) {
  await db.$transaction(async (tx) => {
    const allQuestions = this.extractAllQuestions(sections);
    await this.deduplicateQuestions(tx, projectId, allQuestions);
    await this.batchCreateQuestions(tx, projectId, allQuestions);
  });
}

private extractAllQuestions(sections: Section[]): QuestionItem[] {
  // Extraction logic
}

private async deduplicateQuestions(tx, projectId, questions) {
  // Deduplication logic
}
```

### Acceptance Criteria
- [ ] Break into smaller functions
- [ ] Extract question deduplication
- [ ] Extract batch processing
- [ ] Add unit tests
- [ ] Improve error messages

### Estimated Effort
3-4 hours
